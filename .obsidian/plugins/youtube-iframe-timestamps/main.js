/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Pe=Object.create;var A=Object.defineProperty;var _e=Object.getOwnPropertyDescriptor;var Se=Object.getOwnPropertyNames;var Ae=Object.getPrototypeOf,xe=Object.prototype.hasOwnProperty;var f=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Ee=(e,r)=>{for(var t in r)A(e,t,{get:r[t],enumerable:!0})},G=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Se(r))!xe.call(e,o)&&o!==t&&A(e,o,{get:()=>r[o],enumerable:!(n=_e(r,o))||n.enumerable});return e};var Ie=(e,r,t)=>(t=e!=null?Pe(Ae(e)):{},G(r||!e||!e.__esModule?A(t,"default",{value:e,enumerable:!0}):t,e)),Te=e=>G(A({},"__esModule",{value:!0}),e);var $=f((ft,Q)=>{"use strict";var j;j=function(){var e={},r={};return e.on=function(t,n){var o={name:t,handler:n};return r[t]=r[t]||[],r[t].unshift(o),o},e.off=function(t){var n=r[t.name].indexOf(t);n!==-1&&r[t.name].splice(n,1)},e.trigger=function(t,n){var o=r[t],s;if(o)for(s=o.length;s--;)o[s].handler(n)},e};Q.exports=j});var Z=f((pt,J)=>{var v=1e3,F=v*60,w=F*60,h=w*24,De=h*7,ke=h*365.25;J.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Ne(e);if(t==="number"&&isFinite(e))return r.long?Oe(e):Me(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Ne(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*ke;case"weeks":case"week":case"w":return t*De;case"days":case"day":case"d":return t*h;case"hours":case"hour":case"hrs":case"hr":case"h":return t*w;case"minutes":case"minute":case"mins":case"min":case"m":return t*F;case"seconds":case"second":case"secs":case"sec":case"s":return t*v;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Me(e){var r=Math.abs(e);return r>=h?Math.round(e/h)+"d":r>=w?Math.round(e/w)+"h":r>=F?Math.round(e/F)+"m":r>=v?Math.round(e/v)+"s":e+"ms"}function Oe(e){var r=Math.abs(e);return r>=h?x(e,r,h,"day"):r>=w?x(e,r,w,"hour"):r>=F?x(e,r,F,"minute"):r>=v?x(e,r,v,"second"):e+" ms"}function x(e,r,t,n){var o=r>=t*1.5;return Math.round(e/t)+" "+n+(o?"s":"")}});var H=f((Ct,W)=>{function Ve(e){t.debug=t,t.default=t,t.coerce=y,t.disable=s,t.enable=o,t.enabled=l,t.humanize=Z(),t.destroy=b,Object.keys(e).forEach(a=>{t[a]=e[a]}),t.names=[],t.skips=[],t.formatters={};function r(a){let i=0;for(let u=0;u<a.length;u++)i=(i<<5)-i+a.charCodeAt(u),i|=0;return t.colors[Math.abs(i)%t.colors.length]}t.selectColor=r;function t(a){let i,u=null,P,B;function p(...d){if(!p.enabled)return;let g=p,_=Number(new Date),Fe=_-(i||_);g.diff=Fe,g.prev=i,g.curr=_,i=_,d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let S=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(R,we)=>{if(R==="%%")return"%";S++;let z=t.formatters[we];if(typeof z=="function"){let be=d[S];R=z.call(g,be),d.splice(S,1),S--}return R}),t.formatArgs.call(g,d),(g.log||t.log).apply(g,d)}return p.namespace=a,p.useColors=t.useColors(),p.color=t.selectColor(a),p.extend=n,p.destroy=t.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(P!==t.namespaces&&(P=t.namespaces,B=t.enabled(a)),B),set:d=>{u=d}}),typeof t.init=="function"&&t.init(p),p}function n(a,i){let u=t(this.namespace+(typeof i=="undefined"?":":i)+a);return u.log=this.log,u}function o(a){t.save(a),t.namespaces=a,t.names=[],t.skips=[];let i,u=(typeof a=="string"?a:"").split(/[\s,]+/),P=u.length;for(i=0;i<P;i++)u[i]&&(a=u[i].replace(/\*/g,".*?"),a[0]==="-"?t.skips.push(new RegExp("^"+a.slice(1)+"$")):t.names.push(new RegExp("^"+a+"$")))}function s(){let a=[...t.names.map(C),...t.skips.map(C).map(i=>"-"+i)].join(",");return t.enable(""),a}function l(a){if(a[a.length-1]==="*")return!0;let i,u;for(i=0,u=t.skips.length;i<u;i++)if(t.skips[i].test(a))return!1;for(i=0,u=t.names.length;i<u;i++)if(t.names[i].test(a))return!0;return!1}function C(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}function y(a){return a instanceof Error?a.stack||a.message:a}function b(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}W.exports=Ve});var K=f((c,E)=>{c.formatArgs=Re;c.save=qe;c.load=Le;c.useColors=Ye;c.storage=Ue();c.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ye(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Re(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+E.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}c.log=console.debug||console.log||(()=>{});function qe(e){try{e?c.storage.setItem("debug",e):c.storage.removeItem("debug")}catch(r){}}function Le(){let e;try{e=c.storage.getItem("debug")}catch(r){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function Ue(){try{return localStorage}catch(e){}}E.exports=H()(c);var{formatters:Be}=E.exports;Be.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var ee=f((I,X)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5};X.exports=I.default});var re=f((T,te)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var ze=ee(),m=Ge(ze);function Ge(e){return e&&e.__esModule?e:{default:e}}T.default={pauseVideo:{acceptableStates:[m.default.ENDED,m.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[m.default.ENDED,m.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[m.default.ENDED,m.default.PLAYING,m.default.PAUSED],stateChangeRequired:!0,timeout:3e3}};te.exports=T.default});var oe=f((D,ne)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"];ne.exports=D.default});var se=f((k,ae)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe","getSphericalProperties","setSphericalProperties"];ae.exports=k.default});var le=f((M,ue)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var je=K(),Qe=N(je),$e=re(),ie=N($e),Je=oe(),Ze=N(Je),We=se(),He=N(We);function N(e){return e&&e.__esModule?e:{default:e}}var Ke=(0,Qe.default)("youtube-player"),q={};q.proxyEvents=e=>{let r={};for(let t of Ze.default){let n="on"+t.slice(0,1).toUpperCase()+t.slice(1);r[n]=o=>{Ke('event "%s"',n,o),e.trigger(t,o)}}return r};q.promisifyPlayer=(e,r=!1)=>{let t={};for(let n of He.default)r&&ie.default[n]?t[n]=(...o)=>e.then(s=>{let l=ie.default[n],C=s.getPlayerState(),y=s[n].apply(s,o);return l.stateChangeRequired||Array.isArray(l.acceptableStates)&&!l.acceptableStates.includes(C)?new Promise(b=>{let a=()=>{let i=s.getPlayerState(),u;typeof l.timeout=="number"&&(u=setTimeout(()=>{s.removeEventListener("onStateChange",a),b()},l.timeout)),Array.isArray(l.acceptableStates)&&l.acceptableStates.includes(i)&&(s.removeEventListener("onStateChange",a),clearTimeout(u),b())};s.addEventListener("onStateChange",a)}).then(()=>y):y}):t[n]=(...o)=>e.then(s=>s[n].apply(s,o));return t};M.default=q;ue.exports=M.default});var fe=f((yt,de)=>{de.exports=function(r,t,n){var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");typeof t=="function"&&(n=t,t={}),t=t||{},n=n||function(){},s.type=t.type||"text/javascript",s.charset=t.charset||"utf8",s.async="async"in t?!!t.async:!0,s.src=r,t.attrs&&Xe(s,t.attrs),t.text&&(s.text=""+t.text);var l="onload"in s?ce:et;l(s,n),s.onload||ce(s,n),o.appendChild(s)};function Xe(e,r){for(var t in r)e.setAttribute(t,r[t])}function ce(e,r){e.onload=function(){this.onerror=this.onload=null,r(null,e)},e.onerror=function(){this.onerror=this.onload=null,r(new Error("Failed to load "+this.src),e)}}function et(e,r){e.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,r(null,e))}}});var Ce=f((O,pe)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});var tt=fe(),rt=nt(tt);function nt(e){return e&&e.__esModule?e:{default:e}}O.default=e=>new Promise(t=>{if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){t(window.YT);return}else{let o=window.location.protocol==="http:"?"http:":"https:";(0,rt.default)(o+"//www.youtube.com/iframe_api",s=>{s&&e.trigger("error",s)})}let n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{n&&n(),t(window.YT)}});pe.exports=O.default});var he=f((V,ge)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var ot=$(),at=U(ot),st=le(),ye=U(st),it=Ce(),ut=U(it);function U(e){return e&&e.__esModule?e:{default:e}}var L;V.default=(e,r={},t=!1)=>{let n=(0,at.default)();if(L||(L=(0,ut.default)(n)),r.events)throw new Error("Event handlers cannot be overwritten.");if(typeof e=="string"&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');r.events=ye.default.proxyEvents(n);let o=new Promise(l=>{typeof e=="object"&&e.playVideo instanceof Function?l(e):L.then(C=>{let y=new C.Player(e,r);return n.on("ready",()=>{l(y)}),null})}),s=ye.default.promisifyPlayer(o,t);return s.on=n.on,s.off=n.off,s};ge.exports=V.default});var lt={};Ee(lt,{default:()=>Y});module.exports=Te(lt);var me=require("obsidian"),ve=Ie(he()),Y=class extends me.Plugin{constructor(){super(...arguments);this.player=null}async onload(){console.log("loading plugin"),this.registerEvent(this.app.workspace.on("url-menu",(t,n)=>{t.addItem(o=>{o.setTitle("Open timestamp on iframe").setIcon("video").onClick(async()=>{this.showIFrame(n)})})})),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{this.player.destroy(),this.player=null}))}onunload(){this.player.destroy(),this.player=null,console.log("unloading plugin")}showIFrame(t){let n=this.getYouTubeID(t),o=this.getYouTubeTimestamp(t);this.player||(this.player=(0,ve.default)("video-player")),this.player.loadVideoById(n,o||0),this.player.playVideo()}getYouTubeTimestamp(t){let n=/(?:[?&]t=|#t=)(?:(\d+)h)?(?:(\d+)m)?(\d+)s?/,o=t.match(n);if(o){let s=o[1]?parseInt(o[1],10):0,l=o[2]?parseInt(o[2],10):0,C=o[3]?parseInt(o[3],10):0;return s*3600+l*60+C}else return console.log("No valid YouTube timestamp found."),null}getYouTubeID(t){let n=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,o=t.match(n);return o&&o[1]?o[1]:(console.log("No valid YouTube ID found."),null)}};
/*! Bundled license information:

sister/src/sister.js:
  (**
  * @link https://github.com/gajus/sister for the canonical source repository
  * @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
  *)
*/

/* nosourcemap */